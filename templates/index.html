{% extends "base.html" %}

{% block body_id %}home{% endblock %}

{% block content %}

<div id="promotional">
    
    <div id="escalator">
        <div>
        <h1><span>Tailing your logs has never been easier.</span></h1>
        <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</p>
        <a href="#" id="cta"><span>Try it for free!</span></a>
        </div>
    </div>
    
    <div id="supplementary" class="group">
        <ul class="group">
            <li><h2>Quick</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.</p></li>
            <li><h2>Easy</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.</p></li>
            <li><h2>Shareable</h2><p>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam.</p></li>
        </ul>
    </div>
    
    {% if server_tail %}
        <div id="example">
            <div>
                <h3>Look how cool it is!</h3>
                <article id="log">
                  <section class="heading">
                    <header>
                      <h1>{{ server_tail.filename }}</h1>
                    </header>
                    <aside class="actions">
                      <a href="#" id="start-tail"><span>Start</span></a>
                      <a href="#" id="stop-tail" style="display: none"><span>Stop</span></a>
                      <a href="{% url tail_create %}" id="new-tail" class="tail-create"><span>New Tail</span></a>
                    </aside>
                  </section>

                  <section class="content">
                    <section id="waiting-help">
                      <h2>We&rsquo;re Trying to Connect Now...</h2>
                      <p>Is this taking a long time?</p>
                      <ul>
                          {% if server_tail.password %}
                              <li>
                                  Make sure the password you entered is correct for the user
                                  <strong>{{ server_tail.username }}@{{ server_tail.hostname }}</strong>.
                              </li>
                          {% else %}
                              <li>
                                  If you haven't already, Make sure our public key is added to your server&rsquo;s
                                  <em>authorized_keys</em> file.
                                  To add our key to your file, you can run this command on the server:
                                  <textarea>mkdir -p ~/.ssh &amp;&amp; touch ~/.ssh/authorized_keys &amp;&amp; echo &quot;{{ public_key }}&quot; &gt;&gt; ~/.ssh/authorized_keys</textarea>
                              </li>
                          {% endif %}
                          <li>
                              Also, make sure that the hostname <strong>{{ server_tail.hostname }}</strong>
                              is accessible on port <strong>{{ server_tail.port }}</strong>.
                          </li>
                      </ul>
                    </section>
                    <table id="lines"></table>
                  </section>
                </article>
            </div>
        </div>
    {% endif %}
    
</div>

{% endblock %}

{% block extra_body %}
    {% if server_tail %}
        <script type="text/javascript" charset="utf-8">
            Tail.setup('{% url tail_data server_tail.boxed_id %}', '#lines', false);
            $(window).load(function() {
                setTimeout(Tail.start, 50);
            });
        </script>
    {% endif %}
{% endblock %}